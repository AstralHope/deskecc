<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="max-age=3600">
    <title>MIDAS--Middleware Integrated Diagnostic Analysis System</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="js/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/jquery-1.12.4.min.js"></script>
</head>

<body>
    <div class="sider">
        <a href="#" class="logo"><img src="images/logo04.png" alt="logo"></a>
        <div class="user_info">
            <img src="images/3.jpg" alt="person">
            <span>æ¬¢è¿&nbsp;&nbsp;ä¸­é—´ä»¶</span>
            <b>ç®¡ç†å‘˜</b>
        </div>
        <div class="menu">
            <div class="level01 active"><a href="æ¬¢è¿ä½¿ç”¨MIDAS beta.html" target="main_frame"><i class="iconfont icon-yidiandiantubiao04"></i><span>é¦–é¡µ</span></a></div>
            <div class="level01"><a href="#"><i class="iconfont icon-icon-article"></i><span>äº‘ä¸Šä¿¡æ¯</span><b
                        class="iconfont icon-arrowdownl"></b></a></div>
            <ul class="level02">
                <li>
                    <form action="findMatchingFilesfornode.php" method="POST" target="main_frame">
                        <input type="hidden" name="directory" value="/data/deskecc/ack/index/">
                        <input type="hidden" name="pattern" value="/.*nodes_info\.csv$/">
                        <button type="submit" style="background:none; border:none; cursor:pointer;">
                            <i class="iconfont icon-previewright"></i><span>èŠ‚ç‚¹podä¿¡æ¯</span>
                        </button>
                    </form>
                </li>
                <li>
                    <form action="findMatchingFiles.php" method="POST" target="main_frame">
                        <input type="hidden" name="directory" value="/data/deskecc/ack/index/">
                        <input type="hidden" name="pattern" value="/.*cluster_info\.csv$/">
                        <button type="submit" style="background:none; border:none; cursor:pointer;">
                            <i class="iconfont icon-previewright"></i><span>ACKé›†ç¾¤ä¿¡æ¯</span>
                        </button>
                    </form>
                </li>
                <li>
                    <form action="findMatchingFilesforsofamq.php" method="POST" target="main_frame">
                        <input type="hidden" name="directory" value="/data/deskecc/sofamq/clusterinfo">
                        <!-- <input type="hidden" name="pattern" value="\\.\\.sofamqinfo\\.\\."> -->
                        <button type="submit" style="background:none; border:none; cursor:pointer;">
                            <i class="iconfont icon-previewright"></i><span>SOFAMQä¿¡æ¯</span>
                        </button>
                    </form>
                </li>
                <!-- <li><a  href="å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…....html" target="main_frame"><i class="iconfont icon-previewright"></i><span>SOFAMQä¿¡æ¯</span></a></li> -->
            </ul>
            <div class="level01"><a href="#"><i class="iconfont icon-icon-article"></i><span>äº‘ä¸‹ä¿¡æ¯</span><b
                        class="iconfont icon-arrowdownl"></b></a></div>
            <ul class="level02">
                <li>
                    <form action="display_csv_new.php" method="POST" target="main_frame">
                        <input type="hidden" name="file" value="/data/deskecc/nginx/Nginx.csv">
                        <input type="hidden" name="function" value="makeLinkforNginx">
                        <input type="hidden" name="columnIndex" value="3">
                        <button type="submit" style="background:none; border:none; cursor:pointer;">
                            <i class="iconfont icon-previewright"></i><span>Nginxä¿¡æ¯</span>
                        </button>
                    </form>
                </li>
            </ul>

            <div class="level01"><a href="#"><i class="iconfont icon-key"></i><span>å°å·¥å…·</span><b
                        class="iconfont icon-arrowdownl"></b></a></div>
            <ul class="level02">
                <li><a href="vpcinfo.php" target="main_frame"><i class="iconfont icon-search"></i><span>ç½‘æ®µæœç´¢</span></a></li>
                <li><a  href="./jstack-review/index.html" target="_blank"><i class="iconfont icon-system1"></i><span>JavaCore</span></a></li>
            </ul>

            <!-- <div class="level01"><a href="searchIP.html" target="main_frame"><i class="iconfont icon-comment"></i><span>å°å·¥å…·</span></a></div> -->
            <div class="level01"><a  href="user.html" target="main_frame"><i class="iconfont icon-user"></i><span>ç”¨æˆ·ä¸­å¿ƒ</span></a></div>
        </div>
        <div class="version">v1.3.0(20251027)</div>
    </div>

    <div class="header_bar">        
        <!-- <form class="search_form">
            <input type="text" placeholder="æ—©æœŸç‰ˆæœ¬ï¼Œä¾§è¾¹å’Œé¡¶éƒ¨æŒ‰é’®ç”¨ä¸äº†ï¼Œåˆ«ç‚¹äº†">
            <i class="iconfont icon-search"></i>
        </form> -->
        <div class="user_center_link">
            <!-- <a href="http://53.192.92.79:8088/status" onclick="setMenu(3,0)" target="_blank">Nginx-vts</a> -->
            <a id="vtsStatusLink" href="#" onclick="setMenu(3,0)" target="_blank">Nginx-vts</a>
            <a href="user.html" onclick="setMenu(3,0)" target="main_frame">ä¸ªäººä¸­å¿ƒ</a>
            <img src="images/3.jpg" alt="person">
            <a href="login.html"><i class="iconfont icon-tuichu"></i> é€€å‡º</a>
        </div>
    </div>

    <div class="main" id="main_body">
        <iframe src="æ¬¢è¿ä½¿ç”¨MIDAS beta.html" frameborder="0" id="main_frame" name="main_frame" frameborder="0" scrolling="auto"></iframe>
    </div>
    <div>
        åŠ è½½ä¸­...
    </div>



    <script>
        var $level01 = $('.level01');
        var $subli = $('.level02 li')
        $level01.click(function(){
            $level01.not($(this)).removeClass('active');
            $(this).addClass('active');

            if($(this).next().hasClass('level02')){
                $(this).next().slideToggle();
                $(this).find('b').toggleClass('rotate0');
            }else{
                $subli.removeClass('active'); 
            }
        })

        $subli.click(function(){
            $subli.not($(this)).removeClass('active');
            $(this).addClass('active');

            if(!$(this).parent().prev().hasClass('active')){
                $level01.removeClass('active');
                $(this).parent().prev().addClass('active');
            }
        })

        function resizeFrame(){
            var frame_w = $('#main_body').outerWidth();
			var frame_h = $('#main_body').outerHeight();
			$('#main_frame').css({'width':frame_w,'height':frame_h});
        }

        resizeFrame();

        $(window).resize(function(){
            resizeFrame();
        })


        function setMenu(m,n){
           $level01.eq(m).addClass('active').siblings().not('.level02').removeClass('active');
           if(m!=1){              
              $('.level02').slideUp(); 
           }else{
              $('.level02').slideDown();
              $('.level02').children().eq(n).addClass('active').siblings().removeClass('active');
           }
        }

        function setDynamicPortLink(elementId, targetPort, targetPath) {
            const linkElement = document.getElementById(elementId);

            if (!linkElement) {
                console.error(`Error: Element with ID "${elementId}" not found.`);
                return;
            }

            // 1. è·å–å½“å‰é¡µé¢çš„åè®® (http: æˆ– https:)
            const protocol = window.location.protocol; 
    
            // 2. è·å–å½“å‰é¡µé¢çš„ä¸»æœºå (ä¾‹å¦‚: example.com, localhost, 192.168.1.1)
            const hostname = window.location.hostname; 

            // 3. æ„é€ å®Œæ•´çš„ç›®æ ‡ URL
            // ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ç»„åˆï¼š åè®®://ä¸»æœºå:ç«¯å£/è·¯å¾„
            const targetUrl = `${protocol}//${hostname}:${targetPort}${targetPath}`;

            // 4. è®¾ç½®é“¾æ¥çš„ href å±æ€§
            linkElement.href = targetUrl;
    
            // å¯é€‰ï¼šæ‰“å°é“¾æ¥ä»¥ä¾›è°ƒè¯•
            // console.log(`Set link "${elementId}" to: ${targetUrl}`);
        }

        // ç¡®ä¿åœ¨ DOM å®Œå…¨åŠ è½½åå†è°ƒç”¨å‡½æ•°
        document.addEventListener('DOMContentLoaded', function() {
            // ğŸ“¢ è°ƒç”¨å‡½æ•°ï¼Œä¼ å…¥ä½ çš„å…·ä½“å‚æ•°
            setDynamicPortLink('vtsStatusLink', 8088, '/vts_status');

            // å¦‚æœå°†æ¥éœ€è¦æ·»åŠ å…¶ä»–é“¾æ¥ï¼Œåªéœ€å†æ¬¡è°ƒç”¨å³å¯ï¼š
            // setDynamicPortLink('otherLink', 9090, '/admin_panel'); 
        });

    </script>

</body>
</html>
